cmake_minimum_required(VERSION 3.14)

project(third_party)

include(cmake/build_target.cmake)

if(BUILD_DEPENDENCY)
    list(APPEND CMAKE_PREFIX_PATH "${DEP_INSTALL_DIR}")
    set(CMAKE_PREFIX_PATH ${CMAKE_PREFIX_PATH} PARENT_SCOPE)
    set(PKG_CONFIG_PATH "${DEP_INSTALL_DIR}/usr/lib/pkgconfig:${DEP_INSTALL_DIR}/usr/share/pkgconfig:${DEP_INSTALL_DIR}/lib/pkgconfig:${DEP_INSTALL_DIR}/share/pkgconfig" PARENT_SCOPE)

    if (NOT BUILD_QCOM)
        build_target(zlib)
        build_target(openssl)
    endif()
    if (BUILD_GRPC)
        build_target(cares)
        build_target(absl)
        build_target(protobuf)
        build_target(re2)
        build_target(grpc)
    endif()
    build_target(jsoncpp)
    if (BUILD_MAVSDK)
        build_target(tinyxml2)
        build_target(curl)
        build_target(mavlink)
        build_target(MAVSDK)
    endif()
    if (NOT BUILD_QCOM)
        build_target(pcre2)
        build_target(lighttpd)
    endif()
endif()
